public class com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap extends java.lang.Object
{
    private static final int DEFAULT_CASH_SETTLEMENT_DAYS;
    private static final com.opengamma.financial.convention.businessday.BusinessDayConvention FOLLOWING;
    private static final com.opengamma.financial.convention.calendar.Calendar DEFAULT_CALENDAR;
    private static final com.opengamma.financial.convention.daycount.DayCount ACT_365;
    private static final com.opengamma.financial.convention.daycount.DayCount ACT_360;
    private final com.opengamma.financial.convention.businessday.BusinessDayConvention _businessdayAdjustmentConvention;
    private final com.opengamma.financial.convention.calendar.Calendar _calandar;
    private final com.opengamma.financial.convention.daycount.DayCount _accuralDayCount;
    private final com.opengamma.financial.convention.daycount.DayCount _curveDayCount;

    public void <init>()
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        com.opengamma.financial.convention.businessday.BusinessDayConvention $r1;
        com.opengamma.financial.convention.calendar.Calendar $r2;
        com.opengamma.financial.convention.daycount.DayCount $r3, $r4;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        specialinvoke r0.<java.lang.Object: void <init>()>();

        $r1 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.businessday.BusinessDayConvention FOLLOWING>;

        r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.businessday.BusinessDayConvention _businessdayAdjustmentConvention> = $r1;

        $r2 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.calendar.Calendar DEFAULT_CALENDAR>;

        r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.calendar.Calendar _calandar> = $r2;

        $r3 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_360>;

        r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _accuralDayCount> = $r3;

        $r4 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _curveDayCount> = $r4;

        return;
    }

    public double pvPremiumLegPerUnitSpread(org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, boolean, org.threeten.bp.Period, com.opengamma.analytics.financial.credit.isdastandardmodel.StubType, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve, boolean, com.opengamma.analytics.financial.credit.isdastandardmodel.PriceType)
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        org.threeten.bp.LocalDate r1, r2, r3, r4, r5, r12, r13, r18, r19, r21, r22, r23, $r39, r41;
        boolean z0, z1, $z2, $z3, $z4, $z5, $z6;
        org.threeten.bp.Period r6;
        com.opengamma.analytics.financial.credit.isdastandardmodel.StubType r7;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve r8;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve r9;
        com.opengamma.analytics.financial.credit.isdastandardmodel.PriceType r10, $r38;
        int i0, $i2, i7;
        org.threeten.bp.LocalDate[] r15, r16, r17, $r40;
        byte b1, $b6;
        double[] r20;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule $r34;
        com.opengamma.financial.convention.calendar.Calendar $r35;
        com.opengamma.financial.convention.businessday.BusinessDayConvention $r36;
        com.opengamma.financial.convention.daycount.DayCount $r37;
        double $d0, $d1, $d2, $d3, d4, d5, d6, d7;
        long $l3, $l4, $l5;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        r1 := @parameter0: org.threeten.bp.LocalDate;

        r2 := @parameter1: org.threeten.bp.LocalDate;

        r3 := @parameter2: org.threeten.bp.LocalDate;

        r4 := @parameter3: org.threeten.bp.LocalDate;

        r5 := @parameter4: org.threeten.bp.LocalDate;

        z0 := @parameter5: boolean;

        r6 := @parameter6: org.threeten.bp.Period;

        r7 := @parameter7: com.opengamma.analytics.financial.credit.isdastandardmodel.StubType;

        r8 := @parameter8: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve;

        r9 := @parameter9: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve;

        z1 := @parameter10: boolean;

        r10 := @parameter11: com.opengamma.analytics.financial.credit.isdastandardmodel.PriceType;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "null today");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "null stepinDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r3, "null valueDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r4, "null startDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r5, "null endDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r6, "null tenor");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r7, "null stubType");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r8, "null yieldCurve");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r9, "null hazardRateCurve");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r10, "null priceType");

        $z2 = virtualinvoke r3.<org.threeten.bp.LocalDate: boolean isBefore(org.threeten.bp.chrono.ChronoLocalDate)>(r1);

        staticinvoke <com.opengamma.util.ArgumentChecker: void isFalse(boolean,java.lang.String)>($z2, "Require valueDate >= today");

        $z3 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isBefore(org.threeten.bp.chrono.ChronoLocalDate)>(r1);

        staticinvoke <com.opengamma.util.ArgumentChecker: void isFalse(boolean,java.lang.String)>($z3, "Require stepin >= today");

        $r34 = new com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule;

        $r36 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.businessday.BusinessDayConvention _businessdayAdjustmentConvention>;

        $r35 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.calendar.Calendar _calandar>;

        specialinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: void <init>(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.Period,com.opengamma.analytics.financial.credit.isdastandardmodel.StubType,com.opengamma.financial.convention.businessday.BusinessDayConvention,com.opengamma.financial.convention.calendar.Calendar,boolean)>(r4, r5, r6, r7, $r36, $r35, z1);

        i0 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: int getNumPayments()>();

        r12 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccStartDate(int)>(0);

        $i2 = i0 - 1;

        r13 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccEndDate(int)>($i2);

        if z1 == 0 goto label01;

        $r39 = virtualinvoke r13.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate minusDays(long)>(1L);

        goto label02;

     label01:
        $r39 = r13;

     label02:
        $z4 = virtualinvoke r1.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>($r39);

        if $z4 != 0 goto label03;

        $z5 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>($r39);

        if $z5 == 0 goto label04;

     label03:
        return 0.0;

     label04:
        r15 = virtualinvoke r8.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: org.threeten.bp.LocalDate[] getCurveDates()>();

        r16 = virtualinvoke r9.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: org.threeten.bp.LocalDate[] getCurveDates()>();

        if z0 == 0 goto label05;

        $r40 = staticinvoke <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantScheduleGenerator: org.threeten.bp.LocalDate[] getIntegrationNodesAsDates(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate[],org.threeten.bp.LocalDate[])>(r12, r13, r15, r16);

        goto label06;

     label05:
        $r40 = null;

     label06:
        r17 = $r40;

        if z1 == 0 goto label07;

        $b6 = -1;

        goto label08;

     label07:
        $b6 = 0;

     label08:
        b1 = $b6;

        d4 = 0.0;

        i7 = 0;

     label09:
        if i7 >= i0 goto label12;

        r18 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccStartDate(int)>(i7);

        r41 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccEndDate(int)>(i7);

        r19 = virtualinvoke $r34.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getPaymentDate(int)>(i7);

        $z6 = virtualinvoke r41.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>(r2);

        if $z6 != 0 goto label10;

        goto label11;

     label10:
        r20 = specialinvoke r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: double[] calculateSinglePeriodRPV01(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,int,com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve,com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve)>(r1, r18, r41, r19, b1, r8, r9);

        $d1 = r20[0];

        d4 = d4 + $d1;

        if z0 == 0 goto label11;

        $l3 = (long) b1;

        r21 = virtualinvoke r2.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate plusDays(long)>($l3);

        $l4 = (long) b1;

        r22 = virtualinvoke r18.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate plusDays(long)>($l4);

        $l5 = (long) b1;

        r23 = virtualinvoke r41.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate plusDays(long)>($l5);

        $d2 = r20[1];

        $d3 = specialinvoke r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: double calculateSinglePeriodAccrualOnDefault(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,double,com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve,com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve,org.threeten.bp.LocalDate[])>(r1, r21, r22, r23, $d2, r8, r9, r17);

        d4 = d4 + $d3;

     label11:
        i7 = i7 + 1;

        goto label09;

     label12:
        $r37 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _curveDayCount>;

        d5 = interfaceinvoke $r37.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, r3);

        d6 = virtualinvoke r8.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getDiscountFactor(double)>(d5);

        d7 = d4 / d6;

        $r38 = <com.opengamma.analytics.financial.credit.isdastandardmodel.PriceType: com.opengamma.analytics.financial.credit.isdastandardmodel.PriceType CLEAN>;

        if r10 != $r38 goto label13;

        $d0 = specialinvoke r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: double calculateAccruedInterest(com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule,org.threeten.bp.LocalDate)>($r34, r2);

        d7 = d7 - $d0;

     label13:
        return d7;
    }

    private double[] calculateSinglePeriodRPV01(org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, int, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve)
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        org.threeten.bp.LocalDate r1, r2, r3, r4, $r10;
        int i0, $i2, $i3;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve r5;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve r6;
        double d0, d1, d2, $d3, $d4, d5, d6;
        com.opengamma.financial.convention.daycount.DayCount $r7, $r8, $r9;
        long $l1;
        double[] $r11;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        r1 := @parameter0: org.threeten.bp.LocalDate;

        r2 := @parameter1: org.threeten.bp.LocalDate;

        r3 := @parameter2: org.threeten.bp.LocalDate;

        r4 := @parameter3: org.threeten.bp.LocalDate;

        i0 := @parameter4: int;

        r5 := @parameter5: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve;

        r6 := @parameter6: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve;

        $r7 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _accuralDayCount>;

        d0 = interfaceinvoke $r7.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r2, r3);

        $r8 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _curveDayCount>;

        d5 = interfaceinvoke $r8.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, r4);

        $r9 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _curveDayCount>;

        $l1 = (long) i0;

        $r10 = virtualinvoke r3.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate plusDays(long)>($l1);

        d6 = interfaceinvoke $r9.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, $r10);

        $i2 = staticinvoke <java.lang.Double: int compare(double,double)>(d5, -0.0);

        if $i2 != 0 goto label1;

        d5 = 0.0;

     label1:
        $i3 = staticinvoke <java.lang.Double: int compare(double,double)>(d6, -0.0);

        if $i3 != 0 goto label2;

        d6 = 0.0;

     label2:
        d1 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: double getSurvivalProbability(double)>(d6);

        d2 = virtualinvoke r5.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getDiscountFactor(double)>(d5);

        $r11 = newarray (double)[2];

        $d3 = d0 * d2;

        $d4 = $d3 * d1;

        $r11[0] = $d4;

        $r11[1] = d0;

        return $r11;
    }

    private double calculateSinglePeriodAccrualOnDefault(org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, double, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve, org.threeten.bp.LocalDate[])
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        org.threeten.bp.LocalDate r1, r2, r3, r4, $r11, $r12, $r15, $r17, r18;
        double d0, d1, d2, d3, d4, d5, d6, d7, d8, d9, $d10, $d11, $d12, $d13, $d14, $d15, $d16, $d17, $d18, $d19, $d20, $d21, $d22, $d23, $d24, $d25, $d26, $d27, $d28, $d29, $d30, d31, d32, d33, d34, d36, d37, d38;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve r5;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve r6;
        org.threeten.bp.LocalDate[] r7, r8;
        int i0, $i1, i2;
        boolean $z0, $z1;
        com.opengamma.financial.convention.daycount.DayCount $r9, $r10, $r13, $r14, $r16;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        r1 := @parameter0: org.threeten.bp.LocalDate;

        r2 := @parameter1: org.threeten.bp.LocalDate;

        r3 := @parameter2: org.threeten.bp.LocalDate;

        r4 := @parameter3: org.threeten.bp.LocalDate;

        d0 := @parameter4: double;

        r5 := @parameter5: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve;

        r6 := @parameter6: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve;

        r7 := @parameter7: org.threeten.bp.LocalDate[];

        r8 = staticinvoke <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantScheduleGenerator: org.threeten.bp.LocalDate[] truncateList(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate[])>(r3, r4, r7);

        i0 = lengthof r8;

        $z0 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>(r3);

        if $z0 == 0 goto label1;

        $r17 = r2;

        goto label2;

     label1:
        $r17 = r3;

     label2:
        r18 = $r17;

        $r9 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        d1 = interfaceinvoke $r9.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r3, r4);

        d2 = d0 / d1;

        $r10 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        d31 = interfaceinvoke $r10.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, $r17);

        $i1 = staticinvoke <java.lang.Double: int compare(double,double)>(d31, -0.0);

        if $i1 != 0 goto label3;

        d31 = 0.0;

     label3:
        d32 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: double getSurvivalProbability(double)>(d31);

        d33 = virtualinvoke r5.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getDiscountFactor(double)>(d31);

        d34 = 0.0;

        i2 = 1;

     label4:
        if i2 >= i0 goto label7;

        $r11 = r8[i2];

        $z1 = virtualinvoke $r11.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>(r2);

        if $z1 != 0 goto label5;

        goto label6;

     label5:
        $r13 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        $r12 = r8[i2];

        d36 = interfaceinvoke $r13.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, $r12);

        d3 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: double getSurvivalProbability(double)>(d36);

        d4 = virtualinvoke r5.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getDiscountFactor(double)>(d36);

        $r14 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        $d10 = interfaceinvoke $r14.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r3, r18);

        d5 = $d10 + 0.0013698630136986301;

        $r16 = <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        $r15 = r8[i2];

        $d11 = interfaceinvoke $r16.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r3, $r15);

        d6 = $d11 + 0.0013698630136986301;

        d37 = d6 - d5;

        $d12 = d32 / d3;

        $d13 = staticinvoke <java.lang.Math: double log(double)>($d12);

        d7 = $d13 / d37;

        $d14 = d33 / d4;

        $d15 = staticinvoke <java.lang.Math: double log(double)>($d14);

        d8 = $d15 / d37;

        $d16 = d7 + d8;

        d9 = $d16 + 1.0E-50;

        $d17 = d7 * d2;

        $d18 = $d17 * d32;

        $d30 = $d18 * d33;

        $d19 = 1.0 / d9;

        $d20 = d5 + $d19;

        $d28 = $d20 / d9;

        $d21 = 1.0 / d9;

        $d22 = d6 + $d21;

        $d23 = $d22 / d9;

        $d24 = $d23 * d3;

        $d25 = $d24 / d32;

        $d26 = $d25 * d4;

        $d27 = $d26 / d33;

        $d29 = $d28 - $d27;

        d38 = $d30 * $d29;

        d34 = d34 + d38;

        d32 = d3;

        d33 = d4;

        r18 = r8[i2];

     label6:
        i2 = i2 + 1;

        goto label4;

     label7:
        return d34;
    }

    private double calculateAccruedInterest(com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule, org.threeten.bp.LocalDate)
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule r1;
        org.threeten.bp.LocalDate r2, $r3, $r4, $r6;
        int i0, $i1, $i2, $i3, i4, i5;
        boolean $z0, $z1;
        com.opengamma.financial.convention.daycount.DayCount $r5;
        double $d0;
        com.opengamma.analytics.math.MathException $r7;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        r1 := @parameter0: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule;

        r2 := @parameter1: org.threeten.bp.LocalDate;

        i0 = virtualinvoke r1.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: int getNumPayments()>();

        $r3 = virtualinvoke r1.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccStartDate(int)>(0);

        $z0 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>($r3);

        if $z0 == 0 goto label1;

        $i1 = i0 - 1;

        $r4 = virtualinvoke r1.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccEndDate(int)>($i1);

        $z1 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isBefore(org.threeten.bp.chrono.ChronoLocalDate)>($r4);

        if $z1 != 0 goto label2;

     label1:
        return 0.0;

     label2:
        i4 = virtualinvoke r1.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: int getAccStartDateIndex(org.threeten.bp.LocalDate)>(r2);

        if i4 < 0 goto label3;

        return 0.0;

     label3:
        $i2 = i4 + 1;

        i5 = neg $i2;

        if i5 != 0 goto label4;

        $r7 = new com.opengamma.analytics.math.MathException;

        specialinvoke $r7.<com.opengamma.analytics.math.MathException: void <init>(java.lang.String)>("Error in calculateAccruedInterest - check logic");

        throw $r7;

     label4:
        $r5 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _accuralDayCount>;

        $i3 = i5 - 1;

        $r6 = virtualinvoke r1.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDAPremiumLegSchedule: org.threeten.bp.LocalDate getAccStartDate(int)>($i3);

        $d0 = interfaceinvoke $r5.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>($r6, r2);

        return $d0;
    }

    public double calculateProtectionLeg(org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, org.threeten.bp.LocalDate, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve, com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve, double, boolean)
    {
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap r0;
        org.threeten.bp.LocalDate r1, r2, r3, r4, r5, $r20, $r21;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve r6;
        com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve r7;
        double d0, d1, d2, d3, d4, d5, d6, d7, d8, $d9, $d10, $d11, $d12, $d13, $d14, $d15, $d16, $d17, $d18, $d19, $d20, $d21, $d22, $d23, $d24, $d25, $d26, $d27, $d28, d29, d30, d31, d32, d33, d34, d35, d36, d37;
        boolean z0, $z2, $z3, $z4, $z5;
        org.threeten.bp.LocalDate[] r10, r11;
        double[] r12;
        int i0, i3;
        byte $b1, $b2;
        com.opengamma.financial.convention.daycount.DayCount $r19;

        r0 := @this: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap;

        r1 := @parameter0: org.threeten.bp.LocalDate;

        r2 := @parameter1: org.threeten.bp.LocalDate;

        r3 := @parameter2: org.threeten.bp.LocalDate;

        r4 := @parameter3: org.threeten.bp.LocalDate;

        r5 := @parameter4: org.threeten.bp.LocalDate;

        r6 := @parameter5: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve;

        r7 := @parameter6: com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve;

        d0 := @parameter7: double;

        z0 := @parameter8: boolean;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "null today");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r3, "null valueDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r4, "null startDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r5, "null endDate");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r6, "null yieldCurve");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r7, "null hazardRateCurve");

        staticinvoke <com.opengamma.util.ArgumentChecker: boolean isInRangeInclusive(double,double,double)>(0.0, 1.0, d0);

        $z2 = virtualinvoke r3.<org.threeten.bp.LocalDate: boolean isBefore(org.threeten.bp.chrono.ChronoLocalDate)>(r1);

        staticinvoke <com.opengamma.util.ArgumentChecker: void isFalse(boolean,java.lang.String)>($z2, "Require valueDate >= today");

        $z3 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isBefore(org.threeten.bp.chrono.ChronoLocalDate)>(r1);

        staticinvoke <com.opengamma.util.ArgumentChecker: void isFalse(boolean,java.lang.String)>($z3, "Require stepin >= today");

        $b1 = d0 cmpl 1.0;

        if $b1 != 0 goto label01;

        return 0.0;

     label01:
        $z4 = virtualinvoke r2.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>(r4);

        if $z4 == 0 goto label02;

        $r20 = r2;

        goto label03;

     label02:
        $r20 = r4;

     label03:
        if z0 == 0 goto label04;

        $r21 = virtualinvoke $r20.<org.threeten.bp.LocalDate: org.threeten.bp.LocalDate minusDays(long)>(1L);

        goto label05;

     label04:
        $r21 = $r20;

     label05:
        $z5 = virtualinvoke r5.<org.threeten.bp.LocalDate: boolean isAfter(org.threeten.bp.chrono.ChronoLocalDate)>($r21);

        if $z5 != 0 goto label06;

        return 0.0;

     label06:
        r10 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: org.threeten.bp.LocalDate[] getCurveDates()>();

        r11 = virtualinvoke r7.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: org.threeten.bp.LocalDate[] getCurveDates()>();

        r12 = staticinvoke <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantScheduleGenerator: double[] getIntegrationNodesAsTimes(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate,org.threeten.bp.LocalDate[],org.threeten.bp.LocalDate[])>(r1, $r21, r5, r10, r11);

        $d9 = r12[0];

        d29 = virtualinvoke r7.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: double getRT(double)>($d9);

        $d10 = r12[0];

        d30 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getRT(double)>($d10);

        $d11 = neg d29;

        d31 = staticinvoke <java.lang.Math: double exp(double)>($d11);

        $d12 = neg d30;

        d32 = staticinvoke <java.lang.Math: double exp(double)>($d12);

        d33 = 0.0;

        i0 = lengthof r12;

        i3 = 1;

     label07:
        if i3 >= i0 goto label10;

        d1 = d29;

        d3 = d30;

        d4 = d32;

        d5 = d31;

        $d14 = r12[i3];

        d29 = virtualinvoke r7.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateCreditCurve: double getRT(double)>($d14);

        $d15 = r12[i3];

        d30 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getRT(double)>($d15);

        $d16 = neg d29;

        d31 = staticinvoke <java.lang.Math: double exp(double)>($d16);

        $d17 = neg d30;

        d32 = staticinvoke <java.lang.Math: double exp(double)>($d17);

        d6 = d29 - d1;

        d7 = d30 - d3;

        d8 = d6 + d7;

        $d18 = staticinvoke <java.lang.Math: double abs(double)>(d8);

        $b2 = $d18 cmpg 1.0E-5;

        if $b2 >= 0 goto label08;

        $d23 = d8 / 6.0;

        $d24 = 0.5 - $d23;

        $d25 = d8 * $d24;

        $d26 = 1.0 - $d25;

        $d27 = d6 * $d26;

        $d28 = $d27 * d4;

        d34 = $d28 * d5;

        goto label09;

     label08:
        $d22 = d6 / d8;

        $d20 = d4 * d5;

        $d19 = d32 * d31;

        $d21 = $d20 - $d19;

        d34 = $d22 * $d21;

     label09:
        d33 = d33 + d34;

        i3 = i3 + 1;

        goto label07;

     label10:
        $d13 = 1.0 - d0;

        d35 = d33 * $d13;

        $r19 = r0.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount _curveDayCount>;

        d36 = interfaceinvoke $r19.<com.opengamma.financial.convention.daycount.DayCount: double getDayCountFraction(org.threeten.bp.LocalDate,org.threeten.bp.LocalDate)>(r1, r3);

        d2 = virtualinvoke r6.<com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantDateYieldCurve: double getDiscountFactor(double)>(d36);

        d37 = d35 / d2;

        return d37;
    }

    static void <clinit>()
    {
        com.opengamma.financial.convention.businessday.BusinessDayConvention $r0;
        com.opengamma.financial.convention.calendar.MondayToFridayCalendar $r1;
        com.opengamma.financial.convention.daycount.DayCount $r2, $r3;

        <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: int DEFAULT_CASH_SETTLEMENT_DAYS> = 3;

        $r0 = <com.opengamma.financial.convention.businessday.BusinessDayConventions: com.opengamma.financial.convention.businessday.BusinessDayConvention FOLLOWING>;

        <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.businessday.BusinessDayConvention FOLLOWING> = $r0;

        $r1 = new com.opengamma.financial.convention.calendar.MondayToFridayCalendar;

        specialinvoke $r1.<com.opengamma.financial.convention.calendar.MondayToFridayCalendar: void <init>(java.lang.String)>("Weekend_Only");

        <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.calendar.Calendar DEFAULT_CALENDAR> = $r1;

        $r2 = <com.opengamma.financial.convention.daycount.DayCounts: com.opengamma.financial.convention.daycount.DayCount ACT_365>;

        <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_365> = $r2;

        $r3 = <com.opengamma.financial.convention.daycount.DayCounts: com.opengamma.financial.convention.daycount.DayCount ACT_360>;

        <com.opengamma.analytics.financial.credit.isdastandardmodel.ISDACompliantPresentValueCreditDefaultSwap: com.opengamma.financial.convention.daycount.DayCount ACT_360> = $r3;

        return;
    }
}
