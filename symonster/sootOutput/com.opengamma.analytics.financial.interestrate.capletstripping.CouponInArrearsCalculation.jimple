public class com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation extends java.lang.Object
{
    private static final com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator PVDC;
    private static final com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator PRC;
    private static final com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator PVCSDC;
    private static final com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator PSC;
    private static final com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator MQSBC;
    private final double[] _mrkPrices;
    private final double[] _errors;
    private final com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult;
    private final com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves;
    private final com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface;
    private final double _time;

    public void <init>(com.opengamma.analytics.financial.interestrate.capletstripping.CapletStripper, java.util.List, double[], com.opengamma.analytics.financial.interestrate.capletstripping.MarketDataType, double[], com.opengamma.analytics.math.matrix.DoubleMatrix1D, com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStripper r1;
        java.util.List r2;
        double[] r3, r5, $r19, $r20, $r21, $r22, $r29;
        com.opengamma.analytics.financial.interestrate.capletstripping.MarketDataType r4;
        com.opengamma.analytics.math.matrix.DoubleMatrix1D r6, r9;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface r7;
        long l0, l1, $l4;
        com.opengamma.util.tuple.DoublesPair[] r8;
        com.opengamma.analytics.math.interpolation.CombinedInterpolatorExtrapolator r10;
        int $i2, $i3;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult $r23, $r24, $r26;
        double $d0, $d1;
        com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer $r25;
        com.opengamma.analytics.math.interpolation.GridInterpolator2D $r27;
        com.opengamma.analytics.math.surface.InterpolatedDoublesSurface $r28;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStripper;

        r2 := @parameter1: java.util.List;

        r3 := @parameter2: double[];

        r4 := @parameter3: com.opengamma.analytics.financial.interestrate.capletstripping.MarketDataType;

        r5 := @parameter4: double[];

        r6 := @parameter5: com.opengamma.analytics.math.matrix.DoubleMatrix1D;

        r7 := @parameter6: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface;

        specialinvoke r0.<java.lang.Object: void <init>()>();

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "stripper");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "caps");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r4, "type");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r6, "guess");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r7, "curves");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r3, "mrkPrices");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r5, "errors");

        $i2 = lengthof r3;

        $r19 = staticinvoke <java.util.Arrays: double[] copyOf(double[],int)>(r3, $i2);

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double[] _mrkPrices> = $r19;

        $i3 = lengthof r5;

        $r20 = staticinvoke <java.util.Arrays: double[] copyOf(double[],int)>(r5, $i3);

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double[] _errors> = $r20;

        l0 = staticinvoke <java.lang.System: long nanoTime()>();

        $r22 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double[] _mrkPrices>;

        $r21 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double[] _errors>;

        $r23 = interfaceinvoke r1.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStripper: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult solve(double[],com.opengamma.analytics.financial.interestrate.capletstripping.MarketDataType,double[],com.opengamma.analytics.math.matrix.DoubleMatrix1D)>($r22, r4, $r21, r6);

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult> = $r23;

        l1 = staticinvoke <java.lang.System: long nanoTime()>();

        $l4 = l1 - l0;

        $d0 = (double) $l4;

        $d1 = $d0 * 1.0E-9;

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double _time> = $d1;

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves> = r7;

        $r24 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        $r25 = virtualinvoke $r24.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer getPricer()>();

        r8 = virtualinvoke $r25.<com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer: com.opengamma.util.tuple.DoublesPair[] getExpiryStrikeArray()>();

        $r26 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        r9 = virtualinvoke $r26.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: com.opengamma.analytics.math.matrix.DoubleMatrix1D getCapletVols()>();

        r10 = staticinvoke <com.opengamma.analytics.math.interpolation.CombinedInterpolatorExtrapolatorFactory: com.opengamma.analytics.math.interpolation.CombinedInterpolatorExtrapolator getInterpolator(java.lang.String,java.lang.String)>("Linear", "LinearExtrapolator");

        $r27 = new com.opengamma.analytics.math.interpolation.GridInterpolator2D;

        specialinvoke $r27.<com.opengamma.analytics.math.interpolation.GridInterpolator2D: void <init>(com.opengamma.analytics.math.interpolation.Interpolator1D,com.opengamma.analytics.math.interpolation.Interpolator1D)>(r10, r10);

        $r28 = new com.opengamma.analytics.math.surface.InterpolatedDoublesSurface;

        $r29 = virtualinvoke r9.<com.opengamma.analytics.math.matrix.DoubleMatrix1D: double[] getData()>();

        specialinvoke $r28.<com.opengamma.analytics.math.surface.InterpolatedDoublesSurface: void <init>(com.opengamma.util.tuple.DoublesPair[],double[],com.opengamma.analytics.math.interpolation.Interpolator2D)>(r8, $r29, $r27);

        r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface> = $r28;

        return;
    }

    public double simpleOptionPrice(com.opengamma.analytics.financial.model.volatility.SimpleOptionData)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.model.volatility.SimpleOptionData r1;
        com.opengamma.analytics.math.surface.InterpolatedDoublesSurface $r3;
        double $d0, $d1, $d2, $d3;
        java.lang.Double $r4, $r5, $r6;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.model.volatility.SimpleOptionData;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "option");

        $r3 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface>;

        $d0 = virtualinvoke r1.<com.opengamma.analytics.financial.model.volatility.SimpleOptionData: double getTimeToExpiry()>();

        $r4 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d0);

        $d1 = virtualinvoke r1.<com.opengamma.analytics.financial.model.volatility.SimpleOptionData: double getStrike()>();

        $r5 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d1);

        $r6 = virtualinvoke $r3.<com.opengamma.analytics.math.surface.InterpolatedDoublesSurface: java.lang.Double getZValue(java.lang.Double,java.lang.Double)>($r4, $r5);

        $d2 = virtualinvoke $r6.<java.lang.Double: double doubleValue()>();

        $d3 = staticinvoke <com.opengamma.analytics.financial.model.volatility.BlackFormulaRepository: double price(com.opengamma.analytics.financial.model.volatility.SimpleOptionData,double)>(r1, $d2);

        return $d3;
    }

    public double simpleCapletPrice(com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor r1, $r5;
        com.opengamma.analytics.financial.model.volatility.SimpleOptionData r3;
        com.opengamma.util.money.Currency $r6;
        double $d0, $d1, $d2, $d3, $d4, $d5, $d6, $d7, $d8;
        com.opengamma.analytics.financial.instrument.index.IborIndex $r7;
        boolean $z0;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r8;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "caplet");

        $r5 = new com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor;

        $r6 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: com.opengamma.util.money.Currency getCurrency()>();

        $d0 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingPeriodEndTime()>();

        $d1 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getPaymentYearFraction()>();

        $d2 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getNotional()>();

        $d3 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingTime()>();

        $r7 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: com.opengamma.analytics.financial.instrument.index.IborIndex getIndex()>();

        $d4 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingPeriodStartTime()>();

        $d5 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingPeriodEndTime()>();

        $d6 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingAccrualFactor()>();

        $d7 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getStrike()>();

        $z0 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: boolean isCap()>();

        specialinvoke $r5.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: void <init>(com.opengamma.util.money.Currency,double,double,double,double,com.opengamma.analytics.financial.instrument.index.IborIndex,double,double,double,double,boolean)>($r6, $d0, $d1, $d2, $d3, $r7, $d4, $d5, $d6, $d7, $z0);

        $r8 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        r3 = staticinvoke <com.opengamma.analytics.financial.interestrate.capletstripping.CapFloorDecomposer: com.opengamma.analytics.financial.model.volatility.SimpleOptionData toOption(com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor,com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface)>($r5, $r8);

        $d8 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double simpleOptionPrice(com.opengamma.analytics.financial.model.volatility.SimpleOptionData)>(r3);

        return $d8;
    }

    public com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor r1;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r2;
        double d0, $d1, $d2, d3;
        double[] r3, r4;
        int i0, i1;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult $r9;
        com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer $r10;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r11, $r17;
        com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator $r12;
        java.lang.Object $r13;
        java.lang.Double $r14, $r20, $r21, $r22;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction $r15;
        com.opengamma.analytics.financial.interestrate.payments.provider.CapFloorIborInArrearsSmileModelCapGenericReplicationMethod $r16;
        com.opengamma.util.money.MultipleCurrencyAmount $r18;
        com.opengamma.analytics.math.surface.InterpolatedDoublesSurface $r19;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor;

        r2 := @parameter1: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "caplet");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "interpolator");

        d0 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: double getFixingTime()>();

        $r9 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        $r10 = virtualinvoke $r9.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer getPricer()>();

        r3 = virtualinvoke $r10.<com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer: double[] getStrikes()>();

        i0 = lengthof r3;

        r4 = newarray (double)[i0];

        i1 = 0;

     label1:
        if i1 >= i0 goto label2;

        $r19 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface>;

        $r20 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>(d0);

        $d1 = r3[i1];

        $r21 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d1);

        $r22 = virtualinvoke $r19.<com.opengamma.analytics.math.surface.InterpolatedDoublesSurface: java.lang.Double getZValue(java.lang.Double,java.lang.Double)>($r20, $r21);

        $d2 = virtualinvoke $r22.<java.lang.Double: double doubleValue()>();

        r4[i1] = $d2;

        i1 = i1 + 1;

        goto label1;

     label2:
        $r12 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator PRC>;

        $r11 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r13 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor: java.lang.Object accept(com.opengamma.analytics.financial.interestrate.InstrumentDerivativeVisitor,java.lang.Object)>($r12, $r11);

        $r14 = (java.lang.Double) $r13;

        d3 = virtualinvoke $r14.<java.lang.Double: double doubleValue()>();

        $r15 = new com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction;

        specialinvoke $r15.<com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator,double,double[],double,double[])>(r2, d3, r3, d0, r4);

        $r16 = new com.opengamma.analytics.financial.interestrate.payments.provider.CapFloorIborInArrearsSmileModelCapGenericReplicationMethod;

        specialinvoke $r16.<com.opengamma.analytics.financial.interestrate.payments.provider.CapFloorIborInArrearsSmileModelCapGenericReplicationMethod: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction)>($r15);

        $r17 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r18 = virtualinvoke $r16.<com.opengamma.analytics.financial.interestrate.payments.provider.CapFloorIborInArrearsSmileModelCapGenericReplicationMethod: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CapFloorIbor,com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface)>(r1, $r17);

        return $r18;
    }

    public com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor r1;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r2;
        double d0, $d1, $d2, $d3, $d4, $d5, d6;
        double[] r3, r4;
        int i0, i1;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult $r9;
        com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer $r10;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r11, $r15;
        com.opengamma.analytics.financial.instrument.index.IborIndex $r12;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction $r13;
        com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod $r14;
        com.opengamma.util.money.MultipleCurrencyAmount $r16;
        com.opengamma.analytics.math.surface.InterpolatedDoublesSurface $r17;
        java.lang.Double $r18, $r19, $r20;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        r2 := @parameter1: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "couponIbor");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "interpolator");

        d0 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingTime()>();

        $r9 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        $r10 = virtualinvoke $r9.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer getPricer()>();

        r3 = virtualinvoke $r10.<com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer: double[] getStrikes()>();

        i0 = lengthof r3;

        r4 = newarray (double)[i0];

        i1 = 0;

     label1:
        if i1 >= i0 goto label2;

        $r17 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface>;

        $r18 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>(d0);

        $d4 = r3[i1];

        $r19 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d4);

        $r20 = virtualinvoke $r17.<com.opengamma.analytics.math.surface.InterpolatedDoublesSurface: java.lang.Double getZValue(java.lang.Double,java.lang.Double)>($r18, $r19);

        $d5 = virtualinvoke $r20.<java.lang.Double: double doubleValue()>();

        r4[i1] = $d5;

        i1 = i1 + 1;

        goto label1;

     label2:
        $r11 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r12 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: com.opengamma.analytics.financial.instrument.index.IborIndex getIndex()>();

        $d1 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingPeriodStartTime()>();

        $d2 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingPeriodEndTime()>();

        $d3 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingAccrualFactor()>();

        d6 = interfaceinvoke $r11.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: double getSimplyCompoundForwardRate(com.opengamma.analytics.financial.instrument.index.IborIndex,double,double,double)>($r12, $d1, $d2, $d3);

        $r13 = new com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction;

        specialinvoke $r13.<com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator,double,double[],double,double[])>(r2, d6, r3, d0, r4);

        $r14 = new com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod;

        specialinvoke $r14.<com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction)>($r13);

        $r15 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r16 = virtualinvoke $r14.<com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface)>(r1, $r15);

        return $r16;
    }

    public com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.swap.derivative.Swap, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.swap.derivative.Swap r1;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r2;
        com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity $r5, $r7, $r11, $r13, $r18, $r21, $r22, $r26, $r29, $r30;
        com.opengamma.analytics.financial.interestrate.payments.derivative.Payment $r6, $r12, $r19, $r23, $r27, $r31;
        boolean $z0, $z1;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r8, $r14;
        com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator $r9, $r15;
        java.lang.Object $r10, $r16;
        com.opengamma.util.money.MultipleCurrencyAmount $r17, $r25, $r33, r34, r35;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor $r20, $r24, $r28, $r32;
        int $i0, $i1, i2, i3;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.swap.derivative.Swap;

        r2 := @parameter1: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "swap");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "interpolator");

        $r5 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r6 = virtualinvoke $r5.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z0 = $r6 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        if $z0 == 0 goto label3;

        $r26 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r27 = virtualinvoke $r26.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r28 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r27;

        r34 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r28, r2);

        i2 = 1;

     label1:
        $r29 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $i1 = virtualinvoke $r29.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: int getNumberOfPayments()>();

        if i2 >= $i1 goto label2;

        $r30 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r31 = virtualinvoke $r30.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $r32 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r31;

        $r33 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r32, r2);

        r34 = virtualinvoke r34.<com.opengamma.util.money.MultipleCurrencyAmount: com.opengamma.util.money.MultipleCurrencyAmount plus(com.opengamma.util.money.MultipleCurrencyAmount)>($r33);

        i2 = i2 + 1;

        goto label1;

     label2:
        goto label4;

     label3:
        $r7 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r9 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator PVDC>;

        $r8 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r10 = virtualinvoke $r7.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: java.lang.Object accept(com.opengamma.analytics.financial.interestrate.InstrumentDerivativeVisitor,java.lang.Object)>($r9, $r8);

        r34 = (com.opengamma.util.money.MultipleCurrencyAmount) $r10;

     label4:
        $r11 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r12 = virtualinvoke $r11.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z1 = $r12 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        if $z1 == 0 goto label7;

        $r18 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r19 = virtualinvoke $r18.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r20 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r19;

        r35 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r20, r2);

        i3 = 1;

     label5:
        $r21 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $i0 = virtualinvoke $r21.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: int getNumberOfPayments()>();

        if i3 >= $i0 goto label6;

        $r22 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r23 = virtualinvoke $r22.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i3);

        $r24 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r23;

        $r25 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r24, r2);

        r35 = virtualinvoke r35.<com.opengamma.util.money.MultipleCurrencyAmount: com.opengamma.util.money.MultipleCurrencyAmount plus(com.opengamma.util.money.MultipleCurrencyAmount)>($r25);

        i3 = i3 + 1;

        goto label5;

     label6:
        goto label8;

     label7:
        $r13 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r15 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator PVDC>;

        $r14 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r16 = virtualinvoke $r13.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: java.lang.Object accept(com.opengamma.analytics.financial.interestrate.InstrumentDerivativeVisitor,java.lang.Object)>($r15, $r14);

        r35 = (com.opengamma.util.money.MultipleCurrencyAmount) $r16;

     label8:
        $r17 = virtualinvoke r34.<com.opengamma.util.money.MultipleCurrencyAmount: com.opengamma.util.money.MultipleCurrencyAmount plus(com.opengamma.util.money.MultipleCurrencyAmount)>(r35);

        return $r17;
    }

    public com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor r1;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r2;
        double d0, $d1, $d2, $d3, $d4, $d5, d6;
        double[] r3, r4;
        int i0, i1;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity r7;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult $r10;
        com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer $r11;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r12, $r16;
        com.opengamma.analytics.financial.instrument.index.IborIndex $r13;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction $r14;
        com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod $r15;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity $r17;
        com.opengamma.analytics.math.surface.InterpolatedDoublesSurface $r18;
        java.lang.Double $r19, $r20, $r21;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        r2 := @parameter1: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "couponIbor");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "interpolator");

        d0 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingTime()>();

        $r10 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        $r11 = virtualinvoke $r10.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer getPricer()>();

        r3 = virtualinvoke $r11.<com.opengamma.analytics.financial.interestrate.capletstripping.MultiCapFloorPricer: double[] getStrikes()>();

        i0 = lengthof r3;

        r4 = newarray (double)[i0];

        i1 = 0;

     label1:
        if i1 >= i0 goto label2;

        $r18 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.math.surface.InterpolatedDoublesSurface _surface>;

        $r19 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>(d0);

        $d4 = r3[i1];

        $r20 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d4);

        $r21 = virtualinvoke $r18.<com.opengamma.analytics.math.surface.InterpolatedDoublesSurface: java.lang.Double getZValue(java.lang.Double,java.lang.Double)>($r19, $r20);

        $d5 = virtualinvoke $r21.<java.lang.Double: double doubleValue()>();

        r4[i1] = $d5;

        i1 = i1 + 1;

        goto label1;

     label2:
        $r12 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r13 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: com.opengamma.analytics.financial.instrument.index.IborIndex getIndex()>();

        $d1 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingPeriodStartTime()>();

        $d2 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingPeriodEndTime()>();

        $d3 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor: double getFixingAccrualFactor()>();

        d6 = interfaceinvoke $r12.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: double getSimplyCompoundForwardRate(com.opengamma.analytics.financial.instrument.index.IborIndex,double,double,double)>($r13, $d1, $d2, $d3);

        $r14 = new com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction;

        specialinvoke $r14.<com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator,double,double[],double,double[])>(r2, d6, r3, d0, r4);

        $r15 = new com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod;

        specialinvoke $r15.<com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod: void <init>(com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.InterpolatedSmileFunction)>($r14);

        $r16 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        r7 = virtualinvoke $r15.<com.opengamma.analytics.financial.interestrate.payments.provider.CouponIborInArrearsSmileModelReplicationMethod: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface)>(r1, $r16);

        $r17 = specialinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity pointToParameterSensitivity(com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity)>(r7);

        return $r17;
    }

    private com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity pointToParameterSensitivity(com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity r1;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity $r2, r37;
        java.util.Set $r3, $r4, $r7, $r10, $r23, $r26;
        boolean $z0, $z1, $z2, $z3, $z4, $z5;
        java.lang.Object $r5, $r8, $r11, $r12, $r16, $r18, $r21, $r24, $r27, $r28, $r32, $r34;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MulticurveSensitivity $r6, $r22;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r9, $r15, $r25, $r31;
        com.opengamma.util.tuple.Pair $r13, $r29;
        com.opengamma.analytics.math.matrix.DoubleMatrix1D $r14, $r30;
        java.lang.String $r17, $r33;
        java.util.List $r19, $r35;
        double[] $r20, $r36;
        java.util.Iterator r38, r41, r43, r46;
        com.opengamma.util.money.Currency r39, r44;
        java.util.Map r40, r45;
        java.util.Map$Entry r42, r47;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity;

        $r2 = new com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity;

        specialinvoke $r2.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: void <init>()>();

        r37 = $r2;

        $r3 = virtualinvoke r1.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity: java.util.Set getCurrencies()>();

        r38 = interfaceinvoke $r3.<java.util.Set: java.util.Iterator iterator()>();

     label01:
        $z0 = interfaceinvoke r38.<java.util.Iterator: boolean hasNext()>();

        if $z0 == 0 goto label05;

        $r21 = interfaceinvoke r38.<java.util.Iterator: java.lang.Object next()>();

        r39 = (com.opengamma.util.money.Currency) $r21;

        $r22 = virtualinvoke r1.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MulticurveSensitivity getSensitivity(com.opengamma.util.money.Currency)>(r39);

        r40 = virtualinvoke $r22.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MulticurveSensitivity: java.util.Map getYieldDiscountingSensitivities()>();

        $r23 = interfaceinvoke r40.<java.util.Map: java.util.Set entrySet()>();

        r41 = interfaceinvoke $r23.<java.util.Set: java.util.Iterator iterator()>();

     label02:
        $z4 = interfaceinvoke r41.<java.util.Iterator: boolean hasNext()>();

        if $z4 == 0 goto label04;

        $r24 = interfaceinvoke r41.<java.util.Iterator: java.lang.Object next()>();

        r42 = (java.util.Map$Entry) $r24;

        $r25 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r26 = interfaceinvoke $r25.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: java.util.Set getAllNames()>();

        $r27 = interfaceinvoke r42.<java.util.Map$Entry: java.lang.Object getKey()>();

        $z5 = interfaceinvoke $r26.<java.util.Set: boolean contains(java.lang.Object)>($r27);

        if $z5 == 0 goto label03;

        $r28 = interfaceinvoke r42.<java.util.Map$Entry: java.lang.Object getKey()>();

        $r29 = staticinvoke <com.opengamma.util.tuple.Pairs: com.opengamma.util.tuple.Pair of(java.lang.Object,java.lang.Object)>($r28, r39);

        $r30 = new com.opengamma.analytics.math.matrix.DoubleMatrix1D;

        $r31 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r32 = interfaceinvoke r42.<java.util.Map$Entry: java.lang.Object getKey()>();

        $r33 = (java.lang.String) $r32;

        $r34 = interfaceinvoke r42.<java.util.Map$Entry: java.lang.Object getValue()>();

        $r35 = (java.util.List) $r34;

        $r36 = interfaceinvoke $r31.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: double[] parameterSensitivity(java.lang.String,java.util.List)>($r33, $r35);

        specialinvoke $r30.<com.opengamma.analytics.math.matrix.DoubleMatrix1D: void <init>(double[])>($r36);

        r37 = virtualinvoke r37.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity plus(com.opengamma.util.tuple.Pair,com.opengamma.analytics.math.matrix.DoubleMatrix1D)>($r29, $r30);

     label03:
        goto label02;

     label04:
        goto label01;

     label05:
        $r4 = virtualinvoke r1.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity: java.util.Set getCurrencies()>();

        r43 = interfaceinvoke $r4.<java.util.Set: java.util.Iterator iterator()>();

     label06:
        $z1 = interfaceinvoke r43.<java.util.Iterator: boolean hasNext()>();

        if $z1 == 0 goto label10;

        $r5 = interfaceinvoke r43.<java.util.Iterator: java.lang.Object next()>();

        r44 = (com.opengamma.util.money.Currency) $r5;

        $r6 = virtualinvoke r1.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyMulticurveSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MulticurveSensitivity getSensitivity(com.opengamma.util.money.Currency)>(r44);

        r45 = virtualinvoke $r6.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MulticurveSensitivity: java.util.Map getForwardSensitivities()>();

        $r7 = interfaceinvoke r45.<java.util.Map: java.util.Set entrySet()>();

        r46 = interfaceinvoke $r7.<java.util.Set: java.util.Iterator iterator()>();

     label07:
        $z2 = interfaceinvoke r46.<java.util.Iterator: boolean hasNext()>();

        if $z2 == 0 goto label09;

        $r8 = interfaceinvoke r46.<java.util.Iterator: java.lang.Object next()>();

        r47 = (java.util.Map$Entry) $r8;

        $r9 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r10 = interfaceinvoke $r9.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: java.util.Set getAllNames()>();

        $r11 = interfaceinvoke r47.<java.util.Map$Entry: java.lang.Object getKey()>();

        $z3 = interfaceinvoke $r10.<java.util.Set: boolean contains(java.lang.Object)>($r11);

        if $z3 == 0 goto label08;

        $r12 = interfaceinvoke r47.<java.util.Map$Entry: java.lang.Object getKey()>();

        $r13 = staticinvoke <com.opengamma.util.tuple.Pairs: com.opengamma.util.tuple.Pair of(java.lang.Object,java.lang.Object)>($r12, r44);

        $r14 = new com.opengamma.analytics.math.matrix.DoubleMatrix1D;

        $r15 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r16 = interfaceinvoke r47.<java.util.Map$Entry: java.lang.Object getKey()>();

        $r17 = (java.lang.String) $r16;

        $r18 = interfaceinvoke r47.<java.util.Map$Entry: java.lang.Object getValue()>();

        $r19 = (java.util.List) $r18;

        $r20 = interfaceinvoke $r15.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: double[] parameterForwardSensitivity(java.lang.String,java.util.List)>($r17, $r19);

        specialinvoke $r14.<com.opengamma.analytics.math.matrix.DoubleMatrix1D: void <init>(double[])>($r20);

        r37 = virtualinvoke r37.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity plus(com.opengamma.util.tuple.Pair,com.opengamma.analytics.math.matrix.DoubleMatrix1D)>($r13, $r14);

     label08:
        goto label07;

     label09:
        goto label06;

     label10:
        return r37;
    }

    public com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.swap.derivative.Swap, com.opengamma.analytics.financial.provider.curve.CurveBuildingBlockBundle, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.swap.derivative.Swap r1;
        com.opengamma.analytics.financial.provider.curve.CurveBuildingBlockBundle r2;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r3;
        com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity $r7, $r10, $r12, $r15, $r17, $r20, $r21, $r25, $r28, $r29;
        com.opengamma.analytics.financial.interestrate.payments.derivative.Payment $r8, $r13, $r18, $r22, $r26, $r30;
        boolean $z0, $z1;
        com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator $r9, $r14;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r11, $r16;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor $r19, $r23, $r27, $r31;
        int $i0, $i1, i2, i3;
        com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity $r24, $r32, r33, r34, r35;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.swap.derivative.Swap;

        r2 := @parameter1: com.opengamma.analytics.financial.provider.curve.CurveBuildingBlockBundle;

        r3 := @parameter2: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "swap");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "blockBundle");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r3, "interpolator");

        $r7 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r8 = virtualinvoke $r7.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z0 = $r8 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        if $z0 == 0 goto label3;

        $r25 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r26 = virtualinvoke $r25.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r27 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r26;

        r33 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r27, r3);

        i2 = 1;

     label1:
        $r28 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $i1 = virtualinvoke $r28.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: int getNumberOfPayments()>();

        if i2 >= $i1 goto label2;

        $r29 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r30 = virtualinvoke $r29.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $r31 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r30;

        $r32 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r31, r3);

        r33 = virtualinvoke r33.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity plus(com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity)>($r32);

        i2 = i2 + 1;

        goto label1;

     label2:
        goto label4;

     label3:
        $r9 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator MQSBC>;

        $r10 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r11 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        r33 = virtualinvoke $r9.<com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity fromInstrument(com.opengamma.analytics.financial.interestrate.InstrumentDerivative,com.opengamma.analytics.financial.provider.description.interestrate.ParameterProviderInterface,com.opengamma.analytics.financial.provider.curve.CurveBuildingBlockBundle)>($r10, $r11, r2);

     label4:
        $r12 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r13 = virtualinvoke $r12.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z1 = $r13 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        if $z1 == 0 goto label7;

        $r17 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r18 = virtualinvoke $r17.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r19 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r18;

        r34 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r19, r3);

        i3 = 1;

     label5:
        $r20 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $i0 = virtualinvoke $r20.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: int getNumberOfPayments()>();

        if i3 >= $i0 goto label6;

        $r21 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r22 = virtualinvoke $r21.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i3);

        $r23 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r22;

        $r24 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity presentValueCurveSensitivity(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r23, r3);

        r34 = virtualinvoke r34.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity plus(com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity)>($r24);

        i3 = i3 + 1;

        goto label5;

     label6:
        goto label8;

     label7:
        $r14 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator MQSBC>;

        $r15 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r16 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        r34 = virtualinvoke $r14.<com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity fromInstrument(com.opengamma.analytics.financial.interestrate.InstrumentDerivative,com.opengamma.analytics.financial.provider.description.interestrate.ParameterProviderInterface,com.opengamma.analytics.financial.provider.curve.CurveBuildingBlockBundle)>($r15, $r16, r2);

     label8:
        r35 = virtualinvoke r33.<com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity: com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity plus(com.opengamma.analytics.financial.provider.sensitivity.multicurve.MultipleCurrencyParameterSensitivity)>(r34);

        return r35;
    }

    public java.lang.Double parRate(com.opengamma.analytics.financial.interestrate.swap.derivative.Swap, com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.swap.derivative.Swap r1;
        com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator r2;
        com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity r3, $r8, $r10, $r14, $r16, $r20, $r23, $r24;
        com.opengamma.analytics.financial.interestrate.payments.derivative.Payment $r6, $r9, $r17, $r21, $r25, $r28, $r30, $r33, $r35;
        boolean $z0, $z1;
        com.opengamma.analytics.financial.interestrate.payments.derivative.Payment[] $r7;
        int $i0, $i1, i2, i3;
        com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface $r11, $r32;
        com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator $r12;
        java.lang.Object $r13;
        com.opengamma.util.money.Currency $r15, $r34;
        double $d0, $d1, $d2, $d3, $d4, $d5, $d6, $d7, $d8, $d9, $d10, d11, d12;
        com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon $r18, $r29, $r31;
        java.lang.Double $r19, $r36;
        com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor $r22, $r26;
        com.opengamma.util.money.MultipleCurrencyAmount $r27, r37;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        r1 := @parameter0: com.opengamma.analytics.financial.interestrate.swap.derivative.Swap;

        r2 := @parameter1: com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator;

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r1, "swap");

        staticinvoke <com.opengamma.util.ArgumentChecker: java.lang.Object notNull(java.lang.Object,java.lang.String)>(r2, "interpolator");

        r3 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getFirstLeg()>();

        $r6 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z0 = $r6 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon;

        staticinvoke <com.opengamma.util.ArgumentChecker: void isTrue(boolean,java.lang.String)>($z0, "The first leg should be coupon payment");

        d11 = 0.0;

        i2 = 0;

     label1:
        $r7 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment[] getPayments()>();

        $i0 = lengthof $r7;

        if i2 >= $i0 goto label2;

        $r28 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $r29 = (com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon) $r28;

        $d4 = virtualinvoke $r29.<com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon: double getPaymentYearFraction()>();

        $r30 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $r31 = (com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon) $r30;

        $d5 = virtualinvoke $r31.<com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon: double getNotional()>();

        $d6 = staticinvoke <java.lang.Math: double abs(double)>($d5);

        $d7 = $d4 * $d6;

        $r32 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r33 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $r34 = virtualinvoke $r33.<com.opengamma.analytics.financial.interestrate.payments.derivative.Payment: com.opengamma.util.money.Currency getCurrency()>();

        $r35 = virtualinvoke r3.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i2);

        $d8 = virtualinvoke $r35.<com.opengamma.analytics.financial.interestrate.payments.derivative.Payment: double getPaymentTime()>();

        $r36 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d8);

        $d9 = interfaceinvoke $r32.<com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface: double getDiscountFactor(com.opengamma.util.money.Currency,java.lang.Double)>($r34, $r36);

        $d10 = $d7 * $d9;

        d11 = d11 + $d10;

        i2 = i2 + 1;

        goto label1;

     label2:
        $r8 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r9 = virtualinvoke $r8.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $z1 = $r9 instanceof com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor;

        if $z1 == 0 goto label5;

        $r20 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r21 = virtualinvoke $r20.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r22 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r21;

        r37 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r22, r2);

        i3 = 1;

     label3:
        $r23 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $i1 = virtualinvoke $r23.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: int getNumberOfPayments()>();

        if i3 >= $i1 goto label4;

        $r24 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r25 = virtualinvoke $r24.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(i3);

        $r26 = (com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor) $r25;

        $r27 = virtualinvoke r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.util.money.MultipleCurrencyAmount presentValue(com.opengamma.analytics.financial.interestrate.payments.derivative.CouponIbor,com.opengamma.analytics.financial.model.volatility.smile.fitting.interpolation.GeneralSmileInterpolator)>($r26, r2);

        r37 = virtualinvoke r37.<com.opengamma.util.money.MultipleCurrencyAmount: com.opengamma.util.money.MultipleCurrencyAmount plus(com.opengamma.util.money.MultipleCurrencyAmount)>($r27);

        i3 = i3 + 1;

        goto label3;

     label4:
        goto label6;

     label5:
        $r10 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r12 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator PVDC>;

        $r11 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.description.interestrate.MulticurveProviderInterface _curves>;

        $r13 = virtualinvoke $r10.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: java.lang.Object accept(com.opengamma.analytics.financial.interestrate.InstrumentDerivativeVisitor,java.lang.Object)>($r12, $r11);

        r37 = (com.opengamma.util.money.MultipleCurrencyAmount) $r13;

     label6:
        $r14 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r15 = virtualinvoke $r14.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.util.money.Currency getCurrency()>();

        $d0 = virtualinvoke r37.<com.opengamma.util.money.MultipleCurrencyAmount: double getAmount(com.opengamma.util.money.Currency)>($r15);

        $r16 = virtualinvoke r1.<com.opengamma.analytics.financial.interestrate.swap.derivative.Swap: com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity getSecondLeg()>();

        $r17 = virtualinvoke $r16.<com.opengamma.analytics.financial.interestrate.annuity.derivative.Annuity: com.opengamma.analytics.financial.interestrate.payments.derivative.Payment getNthPayment(int)>(0);

        $r18 = (com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon) $r17;

        $d1 = virtualinvoke $r18.<com.opengamma.analytics.financial.interestrate.payments.derivative.Coupon: double getNotional()>();

        $d2 = staticinvoke <java.lang.Math: double signum(double)>($d1);

        d12 = $d0 * $d2;

        $d3 = d12 / d11;

        $r19 = staticinvoke <java.lang.Double: java.lang.Double valueOf(double)>($d3);

        return $r19;
    }

    public double getTime()
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        double $d0;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        $d0 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: double _time>;

        return $d0;
    }

    public double getChiSq()
    {
        com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation r0;
        com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult $r1;
        double $d0;

        r0 := @this: com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation;

        $r1 = r0.<com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult _capletStrippingResult>;

        $d0 = virtualinvoke $r1.<com.opengamma.analytics.financial.interestrate.capletstripping.CapletStrippingResult: double getChiSqr()>();

        return $d0;
    }

    static void <clinit>()
    {
        com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator $r0;
        com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator $r1;
        com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator $r2, $r4;
        com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator $r3, $r6;
        com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator $r5;

        $r0 = staticinvoke <com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator getInstance()>();

        <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueDiscountingCalculator PVDC> = $r0;

        $r1 = staticinvoke <com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator: com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator getInstance()>();

        <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.ParRateDiscountingCalculator PRC> = $r1;

        $r2 = staticinvoke <com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator getInstance()>();

        <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator PVCSDC> = $r2;

        $r3 = new com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator;

        $r4 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.discounting.PresentValueCurveSensitivityDiscountingCalculator PVCSDC>;

        specialinvoke $r3.<com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator: void <init>(com.opengamma.analytics.financial.interestrate.InstrumentDerivativeVisitor)>($r4);

        <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator PSC> = $r3;

        $r5 = new com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator;

        $r6 = <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterCalculator PSC>;

        specialinvoke $r5.<com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator: void <init>(com.opengamma.analytics.financial.provider.sensitivity.parameter.ParameterSensitivityParameterAbstractCalculator)>($r6);

        <com.opengamma.analytics.financial.interestrate.capletstripping.CouponInArrearsCalculation: com.opengamma.analytics.financial.provider.calculator.generic.MarketQuoteSensitivityBlockCalculator MQSBC> = $r5;

        return;
    }
}
